<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= @gym.name %> - RateMyGym</title>
  
  <!-- Include the new CSS for reviews -->
  <%= stylesheet_link_tag 'gymReviews', media: 'all', 'data-turbolinks-track': 'reload' %>
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>
<body>

  <div class="wrapper">
    <header>
      <img src="https://www.opatoday.com/wp-content/uploads/2020/11/23.jpg" alt="Gym image" class="full-width-image">
      <h1>Gym Reviews for <%= @gym.name %></h1>
      <p class="text"><%= @gym.description %></p>
    </header>

    <h3 class="leaveReviewSign">Leave a review</h3>
    
    <!-- Review form -->
    <%= form_with(model: [ @gym, @gym.reviews.new ], local: true) do |form| %>
      <p>Machines & Equipment:</p>
      <div class="rating">
        <%= form.hidden_field :rating, value: 5 %>  <!-- Example for the rating system -->
        <i class='bx bx-star starMachines'></i>
        <i class='bx bx-star starMachines'></i>
        <i class='bx bx-star starMachines'></i>
        <i class='bx bx-star starMachines'></i>
        <i class='bx bx-star starMachines'></i>
      </div>
      
      <!-- Add other fields for Staff, Location, etc., similar to above -->

      <textarea name="opinion" id="txtBox" cols="60" rows="8" placeholder="Your review..."></textarea>
      <div class="button-group">
        <%= form.submit "Submit", class: "btn btn-submit" %>
      </div>
    <% end %>

    <!-- Display existing reviews -->
    <h3 class="leaveReviewSign">Reviews:</h3>
    <% @reviews.each do |review| %>
      <div class="review-item">
        <p><strong>Reviewed by:</strong> <%= review.user.username %></p>
        <p><strong>Rating:</strong> <%= review.rating %> / 5</p>
        <p><%= review.comment %></p>
        <p><em>Posted on <%= review.created_at.strftime("%b %d, %Y") %></em></p>
      </div>
      <hr>
    <% end %>
  </div>

  <!-- Include the new JavaScript for interactivity -->
  <%= javascript_include_tag 'gymReviews', 'data-turbo-track': 'reload' %>
</body>
</html>
