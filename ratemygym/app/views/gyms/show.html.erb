<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= @gym.name %> - RateMyGym</title>
  <link rel="stylesheet" href="custom.css"> <!-- Assuming custom styles for your project -->
</head>
<body>
  <header>
    <h1><%= @gym.name %></h1>
    <p><%= @gym.description %></p>
  </header>

  <main>
    <h2>Reviews for <%= @gym.name %></h2>
    
    <!-- Display each review for the gym -->
    <% @reviews.each do |review| %>
      <div class="review">
        <strong>Reviewed by:</strong> <%= review.user.username %> <!-- Display the user's username -->
        <br>
        <strong>Rating:</strong> <%= review.rating %> / 5
        <p><%= review.comment %></p>
        <p><em>Posted on <%= review.created_at.strftime("%b %d, %Y") %></em></p>
      </div>
      <hr>
    <% end %>

    <!-- If no reviews yet -->
    <% if @reviews.empty? %>
      <p>No reviews yet. Be the first to review this gym!</p>
    <% end %>

    <!-- Form to submit a review -->
    <h2>Submit a Review</h2>
    <%= form_with(model: [ @gym, @gym.reviews.new ], local: true) do |form| %>
      <div class="form-group">
        <%= form.label :comment, "Write your review:" %>
        <%= form.text_area :comment, rows: 5, placeholder: "Share your experience at this gym..." %>
      </div>

      <div class="form-group">
        <%= form.label :rating, "Rate the gym (1-5):" %>
        <%= form.number_field :rating, in: 1..5 %>
      </div>

      <div class="form-group">
        <%= form.submit "Submit Review", class: "submit-button" %>
      </div>
    <% end %>
  </main>
</body>
</html>
